<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="pl"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DialogUtils.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Scheduler</a> &gt; <a href="index.source.html" class="el_package">com.example.scheduler.utils</a> &gt; <span class="el_source">DialogUtils.kt</span></div><h1>DialogUtils.kt</h1><pre class="source lang-java linenums">package com.example.scheduler.utils

import com.example.scheduler.SchedulerApp
import com.example.scheduler.models.User
import io.github.palexdev.materialfx.controls.MFXButton
import io.github.palexdev.materialfx.controls.MFXListView
import io.github.palexdev.materialfx.controls.MFXPasswordField
import io.github.palexdev.materialfx.dialogs.MFXGenericDialog
import io.github.palexdev.materialfx.dialogs.MFXGenericDialogBuilder
import io.github.palexdev.materialfx.dialogs.MFXStageDialog
import io.github.palexdev.materialfx.enums.ScrimPriority
import io.github.palexdev.mfxresources.fonts.MFXFontIcon
import javafx.collections.FXCollections
import javafx.event.EventHandler
import javafx.geometry.Pos
import javafx.scene.control.Label
import javafx.scene.layout.Pane
import javafx.scene.layout.VBox
import javafx.stage.Modality
import javafx.stage.Stage
import java.io.FileOutputStream
import java.io.IOException
import java.util.*


/**
 * Klasa narzędziowa zawierająca metody do wyświetlania różnych rodzajów dialogów w aplikacji.
 * Umożliwia wyświetlanie niestandardowych dialogów oraz komunikatów z przyciskami.
 */
object DialogUtils {

    /**
     * Metoda wyświetlająca niestandardowe okno dialogowe z podanym komunikatem i przyciskami.
     *
     * @param message Treść wiadomości wyświetlanej w oknie dialogowym.
     * @param owner   Nadrzędne okno dialogu.
     * @param buttons Lista par zawierających tekst przycisku i akcję wykonywaną po jego kliknięciu.
     */
    fun showMessageDialogWithButtons(
        message: String,
        owner: Stage,
        buttons: List&lt;Pair&lt;String, () -&gt; Unit&gt;&gt;): MFXStageDialog {

<span class="pc" id="L44">        val dialog = createCustomDialog(owner) {}</span>

<span class="fc" id="L46">        val buttonNodes = buttons.map { (text, action) -&gt;</span>
<span class="fc" id="L47">            val button = MFXButton(text)</span>
<span class="pc" id="L48">            button.onMouseClicked = EventHandler{dialog.close(); action.invoke()}</span>
<span class="fc" id="L49">            button</span>
        }

<span class="fc" id="L52">        val messageDialog = (dialog.content as MFXGenericDialog)</span>
<span class="fc" id="L53">        messageDialog.addActions(*buttonNodes.toTypedArray())</span>
<span class="fc" id="L54">        val messageLabel = Label(message)</span>
<span class="fc" id="L55">        messageLabel.isWrapText = true</span>
<span class="fc" id="L56">        messageLabel.maxWidth = 300.0</span>
<span class="fc" id="L57">        messageDialog.isShowClose = false</span>
<span class="fc" id="L58">        messageDialog.headerIcon = MFXFontIcon(&quot;fas-circle-question&quot;, 24.0)</span>

<span class="fc bfc" id="L60" title="All 2 branches covered.">        if (message.length &gt; 100) messageLabel.styleClass.add(&quot;messageLong&quot;)</span>
<span class="fc" id="L61">        else messageLabel.styleClass.add(&quot;message&quot;)</span>

<span class="fc" id="L63">        val vbox = VBox(messageLabel)</span>
<span class="fc" id="L64">        vbox.alignment = Pos.CENTER</span>
<span class="fc" id="L65">        messageDialog.content = vbox</span>
<span class="fc" id="L66">        return dialog</span>
    }

    /**
     * Metoda wyświetlająca okno dialogowe z podaną zawartością.
     *
     * @param stage          Scena aplikacji.
     * @param content        Zawartość okna w postaci VBox.
     * @param onHiddenAction Akcja wykonywana po zamknięciu okna dialogowego.
     * @return Obiekt MFXStageDialog reprezentujący niestandardowe okno dialogowe.
     */
<span class="fc" id="L77">    fun showCustomDialog(</span>
        stage: Stage,
        content: VBox,
<span class="fc" id="L80">        shouldBeBigger:Boolean = false,</span>
        onHiddenAction: () -&gt; Unit
    ) : MFXStageDialog {
<span class="fc" id="L83">        val dialog = createCustomDialog(stage,onHiddenAction)</span>
<span class="fc" id="L84">        val messageDialog = (dialog.content as MFXGenericDialog)</span>
<span class="fc" id="L85">        messageDialog.content = content</span>
<span class="fc" id="L86">        messageDialog.styleClass.add(&quot;root&quot;)</span>

<span class="fc bfc" id="L88" title="All 2 branches covered.">        if (shouldBeBigger)</span>
        {
<span class="fc" id="L90">            (dialog.content as MFXGenericDialog).minWidth = 700.0</span>
<span class="fc" id="L91">            (dialog.content as MFXGenericDialog).minHeight = 600.0</span>

        }
<span class="fc" id="L94">        return dialog</span>
    }


    /**
     * Metoda tworząca niestandardowe okno dialogowe.
     *
     * @param owner         Nadrzędne okno dialogowe.
     * @param onHiddenAction Akcja wykonywana po zamknięciu okna.
     * @return Obiekt MFXStageDialog reprezentujący niestandardowe okno dialogowe.
     */
    private fun createCustomDialog(owner: Stage, onHiddenAction: () -&gt; Unit): MFXStageDialog {
<span class="fc" id="L106">        val messageDialog = MFXGenericDialogBuilder.build()</span>
<span class="fc" id="L107">            .makeScrollable(true)</span>
<span class="fc" id="L108">            .setShowMinimize(true)</span>
<span class="fc" id="L109">            .setShowClose(true)</span>
<span class="fc" id="L110">            .setShowAlwaysOnTop(false)</span>
<span class="fc" id="L111">            .get()</span>
<span class="fc" id="L112">        val dialog = MFXGenericDialogBuilder.build(messageDialog)</span>
<span class="fc" id="L113">            .toStageDialogBuilder()</span>
<span class="fc" id="L114">            .initOwner(owner)</span>
<span class="fc" id="L115">            .initModality(Modality.APPLICATION_MODAL)</span>
<span class="fc" id="L116">            .setDraggable(true)</span>
<span class="fc" id="L117">            .setOwnerNode(owner.scene.root as Pane?)</span>
<span class="fc" id="L118">            .setScrimPriority(ScrimPriority.WINDOW)</span>
<span class="fc" id="L119">            .setScrimOwner(true)</span>
<span class="pc" id="L120">            .setOnHidden { onHiddenAction() }</span>
<span class="fc" id="L121">            .get()</span>

<span class="pc bpc" id="L123" title="1 of 2 branches missed.">        messageDialog.stylesheets.add(SchedulerApp::class.java.getResource(&quot;css/customDialogStyles.css&quot;)?.toExternalForm())</span>
<span class="fc" id="L124">        return dialog</span>
    }


    /**
     * Tworzy customowy kontener z listą i etykietą.
     *
     * @param labelText Tekst etykiety.
     * @param items     Lista elementów.
     * @param maxWidth  Maksymalna szerokość listy.
     * @return Kontener z listą rozwijaną i etykietą.
     */
<span class="fc" id="L136">    fun createListView(labelText: String, items: List&lt;String&gt;, maxWidth: Double = Double.MAX_VALUE): VBox</span>
    {
<span class="fc" id="L138">        val listView = MFXListView&lt;String&gt;()</span>
<span class="fc" id="L139">        listView.features().enableBounceEffect()</span>
<span class="fc" id="L140">        listView.features().enableSmoothScrolling(0.5)</span>
<span class="fc" id="L141">        listView.styleClass.add(&quot;customList2&quot;)</span>
<span class="fc" id="L142">        listView.maxWidth = maxWidth</span>

<span class="fc" id="L144">        val label = Label(labelText)</span>
<span class="fc" id="L145">        label.styleClass.add(&quot;header-label-big&quot;)</span>
<span class="fc" id="L146">        listView.items = FXCollections.observableArrayList(items)</span>

<span class="fc" id="L148">        return VBox(15.0, label, listView)</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>